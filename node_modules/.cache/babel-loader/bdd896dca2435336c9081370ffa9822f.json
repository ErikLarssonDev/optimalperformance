{"ast":null,"code":"import _objectSpread from\"/Users/eriklarsson/Desktop/optimal_performance(eng)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/eriklarsson/Desktop/optimal_performance(eng)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useContext,useReducer}from'react';import reducer from'../reducers/cart_reducer';import{ADD_TO_CART,REMOVE_CART_ITEM,TOGGLE_CART_ITEM_AMOUNT,CLEAR_CART,COUNT_CART_TOTALS}from'../actions';var getLocalStorage=function getLocalStorage(){var cart=localStorage.getItem('cart');if(cart){return JSON.parse(localStorage.getItem('cart'));}else{return[];}};var initialState={cart:getLocalStorage(),total_items:0,total_amount:0,shipping_fee:534};var CartContext=/*#__PURE__*/React.createContext();export var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// add to cart\nvar addToCart=function addToCart(id,color,amount,product){dispatch({type:ADD_TO_CART,payload:{id:id,color:color,amount:amount,product:product}});};// remove item\nvar removeItem=function removeItem(id){dispatch({type:REMOVE_CART_ITEM,payload:id});};// toggle amount\nvar toggleAmount=function toggleAmount(id,value){console.log(id,value);dispatch({type:TOGGLE_CART_ITEM_AMOUNT,payload:{id:id,value:value}});};// clear cart\nvar clearCart=function clearCart(){dispatch({type:CLEAR_CART});};useEffect(function(){dispatch({type:COUNT_CART_TOTALS});localStorage.setItem('cart',JSON.stringify(state.cart));},[state.cart]);return/*#__PURE__*/_jsx(CartContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{addToCart:addToCart,removeItem:removeItem,toggleAmount:toggleAmount,clearCart:clearCart}),children:children});};// make sure use\nexport var useCartContext=function useCartContext(){return useContext(CartContext);};","map":{"version":3,"sources":["/Users/eriklarsson/Desktop/optimal_performance(eng)/src/context/cart_context.js"],"names":["React","useEffect","useContext","useReducer","reducer","ADD_TO_CART","REMOVE_CART_ITEM","TOGGLE_CART_ITEM_AMOUNT","CLEAR_CART","COUNT_CART_TOTALS","getLocalStorage","cart","localStorage","getItem","JSON","parse","initialState","total_items","total_amount","shipping_fee","CartContext","createContext","CartProvider","children","state","dispatch","addToCart","id","color","amount","product","type","payload","removeItem","toggleAmount","value","console","log","clearCart","setItem","stringify","useCartContext"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useReducer } from 'react'\nimport reducer from '../reducers/cart_reducer'\nimport {\n  ADD_TO_CART,\n  REMOVE_CART_ITEM,\n  TOGGLE_CART_ITEM_AMOUNT,\n  CLEAR_CART,\n  COUNT_CART_TOTALS,\n} from '../actions'\n\nconst getLocalStorage = () => {\n  let cart = localStorage.getItem('cart')\n  if (cart) {\n    return JSON.parse(localStorage.getItem('cart'))\n  } else {\n    return []\n  }\n}\n\nconst initialState = {\n  cart: getLocalStorage(),\n  total_items: 0,\n  total_amount: 0,\n  shipping_fee: 534,\n}\n\nconst CartContext = React.createContext()\n\nexport const CartProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  // add to cart\n  const addToCart = (id, color, amount, product) => {\n    dispatch({ type: ADD_TO_CART, payload: { id, color, amount, product } })\n  }\n  // remove item\n  const removeItem = (id) => {\n    dispatch({ type: REMOVE_CART_ITEM, payload: id })\n  }\n  // toggle amount\n  const toggleAmount = (id, value) => {\n    console.log(id, value)\n    dispatch({ type: TOGGLE_CART_ITEM_AMOUNT, payload: { id, value } })\n  }\n  // clear cart\n  const clearCart = () => {\n    dispatch({ type: CLEAR_CART })\n  }\n\n  useEffect(() => {\n    dispatch({ type: COUNT_CART_TOTALS })\n    localStorage.setItem('cart', JSON.stringify(state.cart))\n  }, [state.cart])\n\n  return (\n    <CartContext.Provider\n      value={{ ...state, addToCart, removeItem, toggleAmount, clearCart }}\n    >\n      {children}\n    </CartContext.Provider>\n  )\n}\n// make sure use\nexport const useCartContext = () => {\n  return useContext(CartContext)\n}\n"]},"metadata":{},"sourceType":"module"}